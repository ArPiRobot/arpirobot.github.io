<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Using the Minimal Image - ArPiRobot</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">ArPiRobot</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../../downloads/">Downloads</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Setup <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../setup/setuppi/">Setup the Raspberry Pi</a>
</li>
                                    
<li >
    <a href="../../setup/devsetup/">Setup your Computer</a>
</li>
                                    
<li >
    <a href="../../setup/updating/">Installing Updates</a>
</li>
                                    
<li >
    <a href="../../setup/createproject/">Create a Simple Robot Project</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../reference/components/">ArPiRobot Components</a>
</li>
                                    
<li >
    <a href="../../reference/robotclasses/">Robot Classes</a>
</li>
                                    
<li >
    <a href="../../reference/motors/">Motors</a>
</li>
                                    
<li >
    <a href="../../reference/sensors/">Raspberry Pi Sensors</a>
</li>
                                    
<li >
    <a href="../../reference/arduinosensors/">Arduino Coprocessor and Sensors</a>
</li>
                                    
<li >
    <a href="../../reference/media/">Media on Robots</a>
</li>
                                    
<li >
    <a href="../../reference/nettable/">Network Table</a>
</li>
                                    
<li >
    <a href="../../reference/hardware/">Supported Hardware</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Advanced <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../advanced/buildminimage/">Building an ArPiRobot Image</a>
</li>
                                    
<li >
    <a href="../../advanced/imagefromsd/">Image to/from SD Card</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#using-the-minimal-image">Using the Minimal Image</a></li>
            <li><a href="#configure-the-pi">Configure the Pi</a></li>
            <li><a href="#creating-a-program">Creating a Program</a></li>
            <li><a href="#setting-up-for-arpirobot-development">Setting Up For ArPiRobot Development</a></li>
            <li><a href="#deploying-the-program-to-the-robot">Deploying The Program To The Robot</a></li>
            <li><a href="#other-tasks">Other Tasks</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="using-the-minimal-image">Using the Minimal Image</h1>
<h2 id="configure-the-pi">Configure the Pi</h2>
<p>To configure the Pi first connect to its WiFi network. It will be called <code>ArPiRobot-RobotAP</code> and the password will be <code>arpirobot123</code>. Once connected open the Deploy Tool and connect to the robot at the address <code>192.168.10.1</code> (default username and password <code>pi</code> and <code>arpirobot</code> should work).</p>
<p>Once connected there are a few things to configure. First, have it connect to a WiFi network with internet access. This is done <em>in addition to</em> generating its own network. It will even provide internet access over its own network once it connects to another one with internet access. To connect to a different network goto the WiFi tab and under the "Other Network" section enter the name (SSID) and password for a different network.</p>
<p><em>Note: the deploy tool cannot currently connect the pi to a network with no password. Only WPA2 networks are supported</em></p>
<p>You can also at this time change the default name and password for the robot's access point if you want to. When done click Apply. The deploy tool will now be disconnected and WiFi changes will be made. If the robot does not seem to connect to the other network that was specified, just reboot it.</p>
<p>You may also want to use the deploy tool at this time to change the robot's hostname (under the "Other" tab).</p>
<h2 id="creating-a-program">Creating a Program</h2>
<p>When using a robot with the minimal image code will (usually) be developed on another PC. It is therefore necessary to setup said other PC for python development. There are many IDEs that can be used for writing python code, but the simplest and most common is IDLE (installed with python). This guide will use IDEL, however other IDEs can be used too.</p>
<h3 id="installing-python3-and-idle">Installing Python3 and IDLE</h3>
<p>To install python 3 and IDLE on Windows or macOS use the installers provided here. On Linux or BSD packages are most likely provided. Google it.</p>
<p>It is often useful to install the same version of python as is on the Raspberry Pi (3.5.x at the time of writing).</p>
<p>When installing on windows make sure to select Customize install and ensure that Pip is installed. Also (on the second customization page) make sure to check "Add python to environment variables" and "Create shortcuts for installed applications". Once the install completes move on to the next step.</p>
<h2 id="setting-up-for-arpirobot-development">Setting Up For ArPiRobot Development</h2>
<p>A few python libraries are <em>required</em> for ArPiRobot and some others are <em>recommended</em>. It is a good idea to install all of these or IDLE may give you error messages that would not occurr on the robot.</p>
<p>The following command will install all required and recommended packages. If you are familiar with virtual environments and how to use them</p>
<p>Windows (run in command prompt)</p>
<pre><code>python -m pip install apscheduler ansicolors pyserial adafruit-circuitpython-motorkit
</code></pre>

<p>macOS/Linux (run in terminal)</p>
<pre><code>pip3 install apscheduler ansicolors pyserial adafruit-circuitpython-motorkit
</code></pre>

<p>Next install the ArPiRobot library itself. Goto the <a href="https://github.com/MB3hel/ArPiRobot-PythonLib">github repository</a> and clone the repository or download and extract it as a zip file. Open a command prompt or terminal in that folder and run</p>
<p>Windows:</p>
<pre><code>python setup.py install
</code></pre>

<p>macOS/Linux:</p>
<pre><code>sudo python3 setup.py install
</code></pre>

<h3 id="creating-a-program_1">Creating a Program</h3>
<ul>
<li>First, create a folder to keep ArPiRobot programs in. For example you could create a folder called <code>ArPiRobotProjects</code> in your documents folder.</li>
<li>Next, open IDLE (there should be a shortcut in the start menu on windows and on other OSes running the command <code>idle3</code> should work).</li>
<li>Select File &gt; New File and paste the following contents.</li>
</ul>
<pre><code>from arpirobot.core.logger import *
from arpirobot.core.robot import BaseRobot, start_robot

class MyRobot(BaseRobot):
    def robot_started(self):
        pass

    def process(self):
        pass

    def enabled(self):
        pass

    def process_enabled(self):
        pass

    def disabled(self):
        pass

    def process_disabled(self):
        pass

my_robot = MyRobot()
start_robot(my_robot)
</code></pre>

<ul>
<li>Since this program does not do anything with any robot devices (motors, sensors, etc) it can actually be run on the computer by clicking Run &gt; Run Module. If there are any errors when doing so make sure all the packages listed above were installed correctly.</li>
<li>The robot program can run on any PC (not just a Raspberry Pi) as long as it is not using Raspberry Pi specific hardware (such as motor hats, I2C, SPI, GPIO, etc). You could even connect the drive station to the robot program running on the local PC by using "localhost" as the robot address.</li>
<li>For more infomation on the structre of this program see the <a href="guide/intro.md">Programming Guide</a></li>
</ul>
<h2 id="deploying-the-program-to-the-robot">Deploying The Program To The Robot</h2>
<p>Now that we have a working program it is time to deploy it to the robot. To do so make sure the robot is powered on. Make sure you are connected to the same network as the robot (either the "Other network" it is setup to connect to or the robot's own network). Open the deploy tool and connect to the robot. Under the "Robot Code" tab select the project folder (this is the folder that has the <code>example.py</code> program in it). Then select a main script. Choose <code>example.py</code>. Finally, click "Deploy to Robot". This will copy the entire contents of the project folder to the robot and configure it to run the main script on boot. It will then start the main script.</p>
<p>The code should now be running on the robot. Launch the drive station and try to connect. Make sure the robot address is either set to the hostname or IP address of the robot on your network. Try the enable and disable buttons and look at the robot log panel. You will see the messages from <code>log_info</code>.</p>
<h2 id="other-tasks">Other Tasks</h2>
<h3 id="changing-the-password">Changing The Password</h3>
<p>To change the password for the pi user (this is the same password used to login with the deploy tool) login over SSH. Change the hostname in the following command if necessary.</p>
<pre><code>ssh pi@arpirobot-robot
</code></pre>

<p>Enter the current password then run</p>
<pre><code>passwd
</code></pre>

<p>And enter the required information.</p>
<h3 id="updating-software-on-the-raspberry-pi">Updating Software on the Raspberry Pi</h3>
<p>Login via SSH (see previous section) and use <code>apt</code> to install or upgrade linux software.</p>
<h3 id="updating-arpirobot-components">Updating ArPiRobot Components</h3>
<p>Git repos for the python library and Raspbian tools are located in the pi user's home folder.</p>
<p>When connected to the internet the git repos for different components can be updated by running the following command in one of the <code>arpirobot-[component]</code> directories. </p>
<pre><code>git pull origin master
</code></pre>

<p>For the python library re-run <code>sudo python setup.py install</code></p>
<p>For the raspbian tools re-run <code>sudo ./install.sh</code></p>
<h3 id="powering-off-or-rebooting">Powering Off or Rebooting</h3>
<p>As always, the deploy tool can be used (other tab), but as long as the Pi is in Readonly mode (which it will be unless the deploy tool was used to change it since rebooting last) it is safe to unplug at any time. <em>This is true only for the minimal image. The complete image is never readonly!</em></p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
